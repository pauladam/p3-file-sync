<!-- TODO Support live changes -->
<form method='post' action='/set_basedir'>
Change the shared directory
<input name='basedir' type='text'>
<input type='submit'>
</form>

{% if gdocs_entries %}
<b>Google Docs</b>
  <table>
    <tr>
      <th>File Name</th>
      <th>Last Modified</th>
      <th>View</th>
      <th>Download</th>
    </tr>
    {% for doc in gdocs_entries %}
      <tr>
        <td>{{ doc.name }}</td>
        <td>{{ doc.lastmodified|timesince }} ago</td>
        <td>
          <a href='{{ doc.view_link }}'><img src='/static/images/external.png'></a>
        </td>
        <td>
          <a href='{{ doc.download_link }}'><img src='/static/images/download.gif'></a>
        </td>
      </tr>
    {% endfor %}
  </table>
{% else %}
    <p>No files are available.</p>
{% endif %}

<br>
<b>Local Files</b>

{% if files %}
  <table>
    <tr>
      <th>File Name</th>
      <th>File Size</th>
      <th>Last Modified</th>
      <th>Download</th>
      <th>Upload to google docs</th>
    </tr>
    {% for file in files %}
      <tr>
        <td>{{ file.name }}</td>
        <td>{{ file.size|filesizeformat }}</td>
        <td>{{ file.mtime }}</td>
        <td>
          <a href='/download/{{ file.full_path }}'><img src='/static/images/download.gif'></a>
        </td>
        <td> upload to google docs link </td>
      </tr>
    {% endfor %}
  </table>
{% else %}
    <p>No files are available.</p>
{% endif %}
